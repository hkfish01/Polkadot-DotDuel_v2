# 部署檢查清單

> 確保部署過程順利進行的完整清單

**版本**: v1.0.0-mvp  
**日期**: 2025-10-27

---

## 📋 部署前檢查

### 環境準備
- [ ] Node.js >= 18.0.0 已安裝
- [ ] Git 已安裝
- [ ] npm 依賴已安裝（所有項目）
- [ ] 錢包（MetaMask）已安裝並配置

### 測試幣準備
- [ ] 部署賬戶已創建
- [ ] 部署賬戶已獲取測試幣（至少 1 DOT）
- [ ] Oracle 賬戶已創建
- [ ] Oracle 賬戶已獲取測試幣（至少 0.5 DOT）
- [ ] 平台錢包地址已準備

### 代碼準備
- [ ] 所有代碼已提交到 Git
- [ ] 所有測試通過（npm test）
- [ ] 前端構建成功（npm run build）
- [ ] 後端構建成功（npm run build）
- [ ] 合約編譯成功（npm run compile）

---

## 🚀 部署階段

### 階段 1: 部署智能合約

#### 準備工作
- [ ] 創建 `contracts/.env` 文件
- [ ] 配置 `DEPLOYER_PRIVATE_KEY`
- [ ] 配置 `PLATFORM_WALLET`
- [ ] 配置 `ORACLE_ADDRESS`
- [ ] 配置 `PASSET_HUB_RPC_URL`

#### 執行部署
```bash
cd hackathon/contracts
npm run compile
npm run deploy:passetHub
```

#### 部署後檢查
- [ ] 部署交易成功
- [ ] 記錄合約地址
- [ ] 合約版本正確（v0.1.0-mvp）
- [ ] 平台錢包地址正確
- [ ] Oracle 地址正確

#### 記錄信息
```
合約地址: 0x_________________
部署區塊: ___________
部署者: 0x_________________
平台錢包: 0x_________________
Oracle: 0x_________________
Gas 使用: ___________
部署時間: 2025-10-27 __:__
```

---

### 階段 2: 部署前端

#### 配置文件
- [ ] 創建 `frontend/.env`
- [ ] 配置 `VITE_CONTRACT_ADDRESS`（從階段1獲取）
- [ ] 配置 `VITE_CHAIN_ID=1000`
- [ ] 配置 `VITE_RPC_URL`

#### 構建
```bash
cd hackathon/frontend
npm run build
```

#### 構建後檢查
- [ ] 構建成功，無錯誤
- [ ] dist 目錄生成
- [ ] 文件大小合理（< 5MB）

#### 選擇託管服務
- [ ] **選項 A**: Vercel
  - [ ] 安裝 Vercel CLI
  - [ ] 登錄 Vercel
  - [ ] 執行 `vercel --prod`
  - [ ] 記錄前端 URL
  
- [ ] **選項 B**: Netlify
  - [ ] 安裝 Netlify CLI
  - [ ] 登錄 Netlify
  - [ ] 執行 `netlify deploy --prod --dir=dist`
  - [ ] 記錄前端 URL
  
- [ ] **選項 C**: GitHub Pages
  - [ ] 配置 GitHub Pages
  - [ ] 推送到 gh-pages 分支
  - [ ] 記錄前端 URL

#### 部署後檢查
- [ ] 前端可以訪問
- [ ] 頁面加載正常
- [ ] 樣式顯示正確
- [ ] 控制台無嚴重錯誤

#### 記錄信息
```
前端 URL: https://_________________
託管服務: __________
部署時間: 2025-10-27 __:__
```

---

### 階段 3: 部署後端

#### 配置文件
- [ ] 創建 `backend/.env`
- [ ] 配置 `PORT=3000`
- [ ] 配置 `NODE_ENV=production`
- [ ] 配置 `RPC_URL`
- [ ] 配置 `CONTRACT_ADDRESS`（從階段1獲取）
- [ ] 配置 `CHAIN_ID=1000`
- [ ] 配置 `ORACLE_PRIVATE_KEY`
- [ ] 配置 `ALLOWED_ORIGINS`（包含前端 URL）

#### 構建
```bash
cd hackathon/backend
npm run build
```

#### 構建後檢查
- [ ] 構建成功，無錯誤
- [ ] dist 目錄生成

#### 選擇託管服務
- [ ] **選項 A**: Railway
  - [ ] 安裝 Railway CLI
  - [ ] 登錄 Railway
  - [ ] 創建項目
  - [ ] 配置環境變量
  - [ ] 部署
  - [ ] 記錄後端 URL
  
- [ ] **選項 B**: Heroku
  - [ ] 安裝 Heroku CLI
  - [ ] 登錄 Heroku
  - [ ] 創建應用
  - [ ] 配置環境變量
  - [ ] 部署
  - [ ] 記錄後端 URL
  
- [ ] **選項 C**: DigitalOcean
  - [ ] 創建 App
  - [ ] 連接倉庫
  - [ ] 配置環境變量
  - [ ] 部署
  - [ ] 記錄後端 URL

#### 部署後檢查
- [ ] 後端可以訪問
- [ ] Health check 正常（/health）
- [ ] 版本號正確（v1.0.0-mvp）
- [ ] 日誌無嚴重錯誤

#### 記錄信息
```
後端 URL: https://_________________
託管服務: __________
部署時間: 2025-10-27 __:__
```

---

### 階段 4: 啟動 Oracle

#### 檢查配置
- [ ] Oracle 私鑰已配置
- [ ] Oracle 地址有足夠測試幣
- [ ] 合約地址配置正確
- [ ] RPC URL 配置正確

#### 啟動 Oracle
```bash
# 方法 1: 通過 API
curl -X POST https://your-backend-url.com/api/oracle/start

# 方法 2: 在代碼中自動啟動
# 已在 backend/src/index.ts 中配置
```

#### 啟動後檢查
- [ ] Oracle 狀態顯示 "isRunning: true"
- [ ] Oracle 地址正確
- [ ] 合約地址正確
- [ ] 事件監聽已啟動
- [ ] 定時任務已啟動

#### 記錄信息
```
Oracle 地址: 0x_________________
Oracle 狀態: Running/Stopped
啟動時間: 2025-10-27 __:__
```

---

## ✅ 部署後驗證

### 功能測試

#### 測試 1: 前端基本功能
- [ ] 訪問首頁
- [ ] 導航菜單正常
- [ ] 頁面切換正常
- [ ] 版本號顯示正確

#### 測試 2: 錢包連接
- [ ] 可以連接錢包
- [ ] 顯示正確的網絡
- [ ] 顯示正確的地址
- [ ] 可以斷開連接

#### 測試 3: 創建比賽（裁判模式）
- [ ] 打開創建比賽頁面
- [ ] 選擇裁判模式
- [ ] 輸入押注金額（0.01 DOT）
- [ ] 輸入比賽描述
- [ ] 提交交易
- [ ] 等待確認
- [ ] 在比賽列表中看到新比賽

#### 測試 4: 加入比賽
- [ ] 用另一個賬戶連接
- [ ] 找到待加入的比賽
- [ ] 點擊加入
- [ ] 提交交易
- [ ] 等待確認
- [ ] 比賽狀態變為 "IN_PROGRESS"

#### 測試 5: 提交結果
- [ ] 切換回裁判賬戶
- [ ] 進入比賽詳情
- [ ] 選擇贏家
- [ ] 提交結果
- [ ] 等待確認
- [ ] 比賽狀態變為 "COMPLETED"
- [ ] 贏家收到獎金

#### 測試 6: 統計頁面
- [ ] 訪問統計頁面
- [ ] 平台統計顯示正確
- [ ] 排行榜顯示正確
- [ ] 最近比賽顯示正確

#### 測試 7: 我的比賽
- [ ] 訪問我的比賽頁面
- [ ] 顯示參與的比賽
- [ ] 統計數據正確
- [ ] 可以查看比賽詳情

#### 測試 8: Oracle 模式（可選）
- [ ] 創建 Oracle 模式比賽
- [ ] 另一賬戶加入
- [ ] 手動觸發 Oracle 結算
- [ ] 檢查結果正確

#### 測試 9: 取消比賽
- [ ] 創建比賽
- [ ] 無人加入的情況下取消
- [ ] 押注退回

### API 測試

#### Health Check
```bash
curl https://your-backend-url.com/health
```
- [ ] 返回 status: ok
- [ ] 返回版本號
- [ ] 返回時間戳

#### Oracle Status
```bash
curl https://your-backend-url.com/api/oracle/status
```
- [ ] 返回 isRunning
- [ ] 返回 oracleAddress
- [ ] 返回 contractAddress

#### Matches API
```bash
curl https://your-backend-url.com/api/matches
```
- [ ] 返回比賽列表
- [ ] 數據格式正確

---

## 📊 性能檢查

### 前端性能
- [ ] 首次加載時間 < 3秒
- [ ] 頁面切換流暢
- [ ] 無內存洩漏

### 後端性能
- [ ] API 響應時間 < 500ms
- [ ] 無內存洩漏
- [ ] 日誌正常

### 區塊鏈性能
- [ ] 交易確認時間合理
- [ ] Gas 費用合理
- [ ] 事件監聽正常

---

## 🔧 故障排查

### 常見問題

#### 問題 1: 合約部署失敗
- [ ] 檢查私鑰是否正確
- [ ] 檢查賬戶餘額
- [ ] 檢查網絡配置
- [ ] 檢查 Gas 設置

#### 問題 2: 前端無法連接合約
- [ ] 檢查合約地址是否正確
- [ ] 檢查網絡是否匹配
- [ ] 檢查錢包連接
- [ ] 檢查控制台錯誤

#### 問題 3: 後端無法啟動
- [ ] 檢查環境變量
- [ ] 檢查端口是否被佔用
- [ ] 檢查依賴是否安裝
- [ ] 檢查日誌錯誤

#### 問題 4: Oracle 無法工作
- [ ] 檢查 Oracle 私鑰
- [ ] 檢查 Oracle 餘額
- [ ] 檢查 Oracle 地址是否匹配合約
- [ ] 檢查事件監聽

---

## 📝 最終檢查

### 文檔
- [ ] README.md 已更新
- [ ] DEPLOYMENT.md 已完成
- [ ] 部署記錄已填寫
- [ ] API 文檔已更新

### 代碼
- [ ] 所有代碼已提交
- [ ] 版本標籤已創建（v1.0.0-mvp）
- [ ] 無敏感信息在代碼中
- [ ] .env.example 已更新

### 訪問信息
- [ ] 前端 URL 可訪問
- [ ] 後端 URL 可訪問
- [ ] 合約地址已記錄
- [ ] 所有密鑰已安全保存

---

## 🎯 交付清單

### 提交材料
- [ ] 項目代碼倉庫 URL
- [ ] 前端演示 URL
- [ ] 後端 API URL
- [ ] 智能合約地址
- [ ] README 文檔
- [ ] Demo 視頻（可選）
- [ ] 項目說明 PPT（可選）

### 測試賬戶
- [ ] 準備測試賬戶私鑰（安全分享）
- [ ] 測試賬戶有測試幣
- [ ] 測試流程文檔

---

## ✅ 簽核

### 開發團隊
- [ ] 智能合約開發 ✓ 完成
- [ ] 前端開發 ✓ 完成
- [ ] 後端開發 ✓ 完成
- [ ] Oracle 開發 ✓ 完成

### 測試團隊
- [ ] 功能測試 ✓ 通過
- [ ] 集成測試 ✓ 通過
- [ ] 性能測試 ✓ 通過

### 部署團隊
- [ ] 智能合約部署 ✓ 完成
- [ ] 前端部署 ✓ 完成
- [ ] 後端部署 ✓ 完成
- [ ] Oracle 啟動 ✓ 完成

---

## 🎉 部署完成

**部署日期**: 2025-10-27  
**版本**: v1.0.0-mvp  
**狀態**: ✅ 完成

**重要 URL**:
- 前端: https://_______________
- 後端: https://_______________
- 合約: 0x_______________

**團隊**: Polkadot Duel Platform Team  
**黑客松**: Dot Your Future 2025

🚀 **準備好提交了！** 🎉

